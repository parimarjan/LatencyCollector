SELECT COUNT(*) as agg_0 FROM "EXPENDITURES" LEFT OUTER JOIN "HOUSEHOLDS" ON "EXPENDITURES"."HOUSEHOLD_ID" = "HOUSEHOLDS"."HOUSEHOLD_ID"  WHERE "HOUSEHOLDS"."INCOME_RANK_2" >= 0.511901239385764 AND "HOUSEHOLDS"."YEAR" <= 2015